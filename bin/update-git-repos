# Git repositories: we put ours in /opt and ~/git
if command -v git >/dev/null 2>&1; then
  for top_dir in /opt $HOME/git; do
    if [ -d "$top_dir" ]; then
      for git_file in $(find "$top_dir" -type d -name .git); do
        git_dir=$(dirname "$git_file")
        if  [ -w "$git_dir" ]; then
          cd "$git_dir"
          git pull --rebase && git submodule update --init --recursive
        fi
      done
    fi
  done
fi
